"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[23],{1018:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=t(1527),s=t(4744);const i={sidebar_label:"Local Transaction",title:"Local Transaction"},r=void 0,o={id:"learn/fundamentals/data-access/local-transaction",title:"Local Transaction",description:"Unit of Work",source:"@site/docs/02-learn/01-fundamentals/15-data-access/03-local-transaction.mdx",sourceDirName:"02-learn/01-fundamentals/15-data-access",slug:"/learn/fundamentals/data-access/local-transaction",permalink:"/kit/zh-Hans/docs/learn/fundamentals/data-access/local-transaction",draft:!1,unlisted:!1,editUrl:"https://github.com/go-saas/kit/tree/main/docs/docs/02-learn/01-fundamentals/15-data-access/03-local-transaction.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Local Transaction",title:"Local Transaction"},sidebar:"tutorialSidebar",previous:{title:"Orm",permalink:"/kit/zh-Hans/docs/learn/fundamentals/data-access/orm"},next:{title:"Distributed Transaction",permalink:"/kit/zh-Hans/docs/learn/fundamentals/distributed-transaction"}},c={},l=[{value:"Unit of Work",id:"unit-of-work",level:2},{value:"Middleware",id:"middleware",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"unit-of-work",children:"Unit of Work"}),"\n",(0,a.jsx)(n.p,{children:'The "Unit of Work" is a design pattern used in software development, particularly in the context of managing database transactions and ensuring data consistency.'}),"\n",(0,a.jsx)(n.p,{children:"It prevents passing the transaction database as a parameter layer by layer, simplifying future development and providing a unified mental model for transactions."}),"\n",(0,a.jsxs)(n.p,{children:["Github: ",(0,a.jsx)(n.a,{href:"https://github.com/go-saas/uow",children:"https://github.com/go-saas/uow"})]}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:['This implementation is not an unbreakable version; it simply stores multiple transactions in a unit of work, which are "committed together" when the unit of work is submitted and "rolled back together" in case of an error. It cannot guarantee full "togetherness" in the true sense. If you require strong consistency, please consider looking into ',(0,a.jsx)(n.a,{href:"../distributed-transaction",children:"distributed transactions"}),"."]})}),"\n",(0,a.jsx)(n.h3,{id:"middleware",children:"Middleware"}),"\n",(0,a.jsxs)(n.p,{children:["The middleware encapsulates the request into a separate unit of work, so that if any errors occur during request processing, all modifications can be rolled back promptly to prevent user inconvenience.\nHowever, the following operations will be ",(0,a.jsx)(n.strong,{children:"skipped"})," by default from encapsulation."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Http request with safe methods ",(0,a.jsx)(n.code,{children:"GET"}),", ",(0,a.jsx)(n.code,{children:"HEAD"}),", ",(0,a.jsx)(n.code,{children:"OPTIONS"}),", ",(0,a.jsx)(n.code,{children:"TRACE"})]}),"\n",(0,a.jsxs)(n.li,{children:["Operations start with ",(0,a.jsx)(n.code,{children:"GET"})," (case insensitive)"]}),"\n",(0,a.jsxs)(n.li,{children:["Operations start with ",(0,a.jsx)(n.code,{children:"LIST"})," (case insensitive)"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["You can also find corresponding middleware in ",(0,a.jsx)(n.a,{href:"../events",children:"events"})," and ",(0,a.jsx)(n.a,{href:"../background-job",children:"background jobs"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},4744:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var a=t(959);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);