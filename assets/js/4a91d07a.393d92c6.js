"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7526],{137:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>f,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=i(1527),r=i(4744);const o={sidebar_label:"Configuration",title:"Configuration"},t=void 0,a={id:"learn/fundamentals/configuration",title:"Configuration",description:"Configuration is based on Kratos Config and data format is defined as Protobuf",source:"@site/docs/02-learn/01-fundamentals/06-configuration.mdx",sourceDirName:"02-learn/01-fundamentals",slug:"/learn/fundamentals/configuration",permalink:"/kit/docs/learn/fundamentals/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/go-saas/kit/tree/main/docs/docs/02-learn/01-fundamentals/06-configuration.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_label:"Configuration",title:"Configuration"},sidebar:"tutorialSidebar",previous:{title:"Virtual File System",permalink:"/kit/docs/learn/fundamentals/vfs"},next:{title:"Cache",permalink:"/kit/docs/learn/fundamentals/cache"}},l={},c=[{value:"VFS Integration",id:"vfs-integration",level:2},{value:"Common Configuration",id:"common-configuration",level:2},{value:"Modules Configuration",id:"modules-configuration",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Configuration is based on ",(0,s.jsx)(e.a,{href:"https://go-kratos.dev/en/docs/component/config/",children:"Kratos Config"})," and data format is defined as ",(0,s.jsx)(e.a,{href:"./protobuf",children:"Protobuf"})]}),"\n",(0,s.jsxs)(e.h2,{id:"vfs-integration",children:[(0,s.jsx)(e.a,{href:"./vfs",children:"VFS"})," Integration"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:'import(\n    ...\n    \tkitconf "github.com/go-saas/kit/pkg/conf"\n)\nflag.Parse()\n\nsource := []config.Source{\n    env.NewSource("KRATOS_"),\n}\nif flagconf == nil {\n    flagconf = append(flagconf, "./configs")\n}\nfor _, s := range flagconf {\n    v := vfs.New()\n    //mount filter config files\n    v.Mount("/", afero.NewRegexpFs(afero.NewBasePathFs(afero.NewOsFs(), strings.TrimSpace(s)), regexp.MustCompile(`\\.(json|proto|xml|yaml)$`)))\n    //vfs as configuration source\n    source = append(source, kitconf.NewVfs(v, "/"))\n}\n\nc := config.New(\n    config.WithSource(\n        source...,\n    ),\n)\ndefer c.Close()\nif err := c.Load(); err != nil {\n    panic(err)\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"common-configuration",children:"Common Configuration"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["data:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["endpoints:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"databases: database dsn"}),"\n",(0,s.jsx)(e.li,{children:"events: distributed eventbus"}),"\n",(0,s.jsx)(e.li,{children:"redis: distributed key-value database"}),"\n",(0,s.jsx)(e.li,{children:"email: email sender"}),"\n",(0,s.jsx)(e.li,{children:"sms: sms sender"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["vfs: ",(0,s.jsx)(e.a,{href:"./vfs",children:"virtual file system"})," mount paths"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["security:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["jwt: ",(0,s.jsx)(e.a,{href:"./authentication#JWT",children:"jwt"})]}),"\n",(0,s.jsxs)(e.li,{children:["security_cookie: ",(0,s.jsx)(e.a,{href:"./authentication#Session",children:"session"})]}),"\n",(0,s.jsxs)(e.li,{children:["session_cookie: ",(0,s.jsx)(e.a,{href:"./authentication#Session",children:"session"})]}),"\n",(0,s.jsxs)(e.li,{children:["remember_cookie: ",(0,s.jsx)(e.a,{href:"./authentication#Session",children:"session"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["services:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["services: configuration for ",(0,s.jsx)(e.a,{href:"./registry",children:"registry"})]}),"\n",(0,s.jsx)(e.li,{children:"servers: server config"}),"\n",(0,s.jsx)(e.li,{children:"clients: server to server communication client"}),"\n",(0,s.jsxs)(e.li,{children:["registry: ",(0,s.jsx)(e.a,{href:"./registry",children:"registry"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["logging: ",(0,s.jsx)(e.a,{href:"./observability/logging",children:"logging"})]}),"\n",(0,s.jsxs)(e.li,{children:["tracing: ",(0,s.jsx)(e.a,{href:"./observability/tracing",children:"tracing"})]}),"\n",(0,s.jsx)(e.li,{children:"app: application config"}),"\n",(0,s.jsx)(e.li,{children:"dev: development config"}),"\n",(0,s.jsxs)(e.li,{children:["stripe: ",(0,s.jsx)(e.a,{href:"https://stripe.com/",children:"stripe"})," config"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"modules-configuration",children:"Modules Configuration"}),"\n",(0,s.jsxs)(e.p,{children:["Refer to ",(0,s.jsx)(e.a,{href:"../../category/modules",children:"modules"})]})]})}function f(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},4744:(n,e,i)=>{i.d(e,{Z:()=>a,a:()=>t});var s=i(959);const r={},o=s.createContext(r);function t(n){const e=s.useContext(o);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);